<html>
<head>
    <meta charset="utf-8"/>
    <title>Poster</title>
    <style type="text/css">
        html,body,div{margin:0;padding:0;}
    </style>
</head>
<body>
    <svg width="640px" height="1024px" viewBox="0 0 640 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
            <rect id="path-1" x="0" y="0" width="100" height="100"></rect>
            <polygon id="path-3" points="0 0 100 0 100 140 0 140"></polygon>
            <pattern id="pattern-5" patternUnits="objectBoundingBox" x="-24.9067164%" width="124.906716%" height="100%">
                <use xlink:href="#avatar" transform="scale(0.0373134328,0.0373134328)"></use>
            </pattern>
            <image id="avatar" width="1606" height="1072" xlink:href="./header.png"></image>
        </defs>
        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="page1" transform="translate(-55.000000, -300.000000)">
                <g id="page1-2" transform="translate(55.000000, 300.000000)">
                    <g id="page1-21">
                        <g id="Group-10">
                            <g id="background" fill="#FFFFFF">
                                <rect id="Rectangle" x="0" y="0" width="640" height="1024" rx="24"></rect>
                            </g>
                            <path d="M20.5,983.505974 C31.4246425,983.767475 40.232521,992.575353 40.4940218,1003.5 L599.505978,1003.5 C599.767479,992.575353 608.575358,983.767475 619.5,983.505974 L619.5,40.4940173 C608.575358,40.2325165 599.767479,31.424638 599.505978,20.4999955 L40.4940218,20.4999955 C40.232521,31.424638 31.4246425,40.2325165 20.5,40.4940173 L20.5,983.505974 Z" id="Combined-Shape" stroke="#DDDDDD"></path>
                        </g>
                        <g id="Group-4" transform="translate(21.000000, 56.000000)">
                            <g id="timg" transform="translate(447.000000, 773.000000)">
                                <mask id="mask-2" fill="white">
                                    <use xlink:href="#path-1"></use>
                                </mask>
                                <g id="Mask"></g>
                                <image mask="url(#mask-2)" id="qrcode" x="0" y="0" width="100" height="100" xlink:href="./qrcode.png"></image>
                                <text id="qrcode_name" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" line-spacing="50" fill="#8B8B8B">
                                    <tspan x="6" y="118">「书棚读书」</tspan>
                                </text>
                            </g>
                            <g id="Group-7" transform="translate(0.000000, 341.000000)" fill="#EEEEEE">
                                <path d="M73.2618454,-2.48689958e-14 L73.2618454,11.4413965 C68.0947631,13.1022444 64.0349127,16.0548628 60.713217,20.2992519 C57.3915212,24.3591022 55.915212,28.6034913 56.0997506,33.032419 C57.0224439,32.478803 58.4987531,32.2942643 60.5286783,32.2942643 C64.2194514,32.2942643 67.5411471,33.5860349 70.1246883,36.1695761 C72.7082294,38.7531172 74,42.074813 74,46.1346633 C74,50.1945137 72.5236908,53.5162095 69.9401496,56.0997506 C67.1720698,58.6832918 63.6658354,59.9750623 59.4214464,59.9750623 C54.4389027,59.9750623 50.3790524,57.9451372 47.4264339,53.8852868 C44.2892768,50.0099751 42.8129676,45.0274314 42.8129676,38.9376559 C42.8129676,29.3416459 45.5810474,21.2219451 51.117207,14.2094763 C56.4688279,7.19700748 63.8503741,2.39900249 73.2618454,-2.48689958e-14 Z M30.2643392,-2.48689958e-14 L30.2643392,11.4413965 C25.2817955,13.1022444 21.2219451,16.0548628 18.084788,20.2992519 C14.7630923,24.3591022 13.1022444,28.6034913 13.286783,33.032419 C14.0249377,32.478803 15.5012469,32.2942643 17.7157107,32.2942643 C21.4064838,32.2942643 24.5436409,33.5860349 27.127182,36.1695761 C29.7107232,38.7531172 31.1870324,42.074813 31.1870324,46.1346633 C31.1870324,50.1945137 29.7107232,53.5162095 27.127182,56.0997506 C24.3591022,58.6832918 20.8528678,59.9750623 16.6084788,59.9750623 C11.6259352,59.9750623 7.75062344,57.9451372 4.79800499,53.8852868 C1.47630923,50.0099751 0,45.0274314 0,38.9376559 C0,29.3416459 2.58354115,21.2219451 8.11970075,14.2094763 C13.6558603,7.19700748 21.0374065,2.39900249 30.2643392,-2.48689958e-14 Z" id="group77"></path>
                            </g>
                            <g id="Group-8" transform="translate(35, 377)">
                                <text id="content" font-family="PingFangSC-Regular, PingFang SC" font-size="24" font-weight="normal" line-spacing="50" fill="#252525">
                                    <tspan x="0" y="30">“有些黑人撒谎，有些黑人不道德，有些黑人在女</tspan>
                                    <tspan x="0" y="80">人面前不规矩——不管她们是黑种女人还是白种女</tspan>
                                    <tspan x="0" y="130">人。但是，这种真相适用于人类所有的种族，而不</tspan>
                                    <tspan x="0" y="180">仅仅是某个特殊的种族。在这个法庭里的人，没有</tspan>
                                    <tspan x="0" y="230">人没撒过谎，没有人没做过不道德的事，没有一个</tspan>
                                    <tspan x="0" y="280">男人会看女人时从来不带欲望。”</tspan>
                                </text>
                                <rect id="Rectangle" fill="#EEEEEE" x="0" y="45" width="528" height="1"></rect>
                                <rect id="Rectangle" fill="#EEEEEE" x="0" y="95" width="528" height="1"></rect>
                                <rect id="Rectangle" fill="#EEEEEE" x="0" y="145" width="528" height="1"></rect>
                                <rect id="Rectangle" fill="#EEEEEE" x="0" y="195" width="528" height="1"></rect>
                                <rect id="Rectangle" fill="#EEEEEE" x="0" y="245" width="528" height="1"></rect>
                                <rect id="Rectangle" fill="#EEEEEE" x="0" y="295" width="528" height="1"></rect>
                            </g>
                            <text id="ReadingTime-box" font-family="PingFangSC-Regular, PingFang SC" font-size="24" font-weight="normal" fill="#888888">
                            <tspan x="35" y="309" id="readingtime">阅读时长：约8个小时</tspan>
                            </text>
                            <g id="Group-5" transform="translate(0.000000, 64.000000)">
                                <rect id="Rectangle" fill="#FDFDF6" x="0" y="0" width="598" height="160"></rect>
                                <text id="authorarea" font-family="PingFangSC-Regular, PingFang SC" font-size="24" font-weight="normal" letter-spacing="0.04" fill="#888888">
                                    <tspan x="155" y="103" id="author">[美] 特德·霍普</tspan>
                                </text>
                                <g id="04" transform="translate(35.000000, 10.000000)">
                                    <mask id="mask-4" fill="white">
                                        <use xlink:href="#path-3"></use>
                                    </mask>
                                    <g id="Mask"></g>
                                    <image id="bookcover" mask="url(#mask-4)" x="0" y="-3.5" width="107" height="157.174067" xlink:href="./bookcover.png"></image>
                                </g>
                                <text id="BOOK-TITLE" font-family="PingFangSC-Medium, PingFang SC" font-size="28" font-weight="400" fill="#222222">
                                    <tspan x="155" y="48" id="title">希望为电影</tspan>
                                </text>
                            </g>
                            <g id="Group-3" transform="translate(35.000000, 0.000000)">
                                <text id="name-come-on,-here-t" font-family="PingFangSC-Regular, PingFang SC" font-size="24" font-weight="normal">
                                    <tspan x="56" y="29" fill="#89C9AE" id="name">张君宝</tspan>
                                    <tspan x="116" y="29" fill="#A7D7C3"></tspan>
                                    <tspan x="140" y="29" fill="#222222">写了书评，请你来看</tspan>
                                </text>
                                <rect id="Rectangle" fill="url(#pattern-5)" x="0" y="0" width="40" height="40" rx="6"></rect>
                            </g>
                            <g id="Group-6" transform="translate(51.000000, 780.000000)">
                                <text id="COME-WITH-ME" font-family="PingFangSC-Medium, PingFang SC" font-size="30" font-weight="400" fill="#222222">
                                    <tspan x="0" y="32">和我一起分享好书吧</tspan>
                                </text>
                                <text id="scan-or-longpress-QR" font-family="PingFangSC-Regular, PingFang SC" font-size="24" font-weight="normal" fill="#8B8B8B">
                                    <tspan x="0" y="79">扫码或长按小程序码</tspan>
                                </text>
                            </g>
                            <g id="sharebook" transform="translate(144.000000, 904.000000)" fill="#89C9AE">
                                <polygon id="Rectangle" points="5.5 9 11 14.5 5.5 20 4.4408921e-15 14.5"></polygon>
                                <polygon id="Rectangle" points="304.5 9 310 14.5 304.5 20 299 14.5"></polygon>
                                <text id="can-i-share-my-book" font-size="20" font-weight="normal"> <tspan x="35" y="21">赶快私聊我，借走这本书吧</tspan>
                                </text>
                            </g>
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </svg>

    <script>
        function update(options) {
            var name = document.querySelector("#name");
            var title= document.querySelector("#title");
            var author= document.querySelector("#author");
            var bookcover= document.querySelector("#bookcover");
            var readingtime = document.querySelector("#readingtime");
            var qrcode= document.querySelector("#qrcode");
            var sharebook= document.querySelector("#sharebook");
            var content = document.querySelector("#content");
            name.innerHTML = options.user.name;
            let _title = options.movie.title
            title.innerHTML = _title.length>14 ? _title.substr(0, 14) + '...' : _title;
            author.innerHTML = options.movie.author;
            avatar.setAttribute('xlink:href', replaceWithPath(options.user.avatar))
            bookcover.setAttribute('xlink:href', replaceWithPath(options.movie.cover)||'../../../php-server/public/images/cover/default_cover.png')
            qrcode.setAttribute('xlink:href', replaceWithPath(options.qrcode))
            readingtime.innerHTML = "阅读时长：约" + options.comment.readingTime + "个小时";
            content.innerHTML = options.comment.content

            if(parseInt(options.sharebook)!==1){
                sharebook.style.display="none"
            } else {
                sharebook.style.display=""
            }
        }

        function replaceWithPath(url){
            return url.replace(/^https:\/\/www.qingyouyuedu.com/, '../../../php-server/public')
        }

    </script>
</body>
</html>
